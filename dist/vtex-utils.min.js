/*!!
 * VtexUtils.js v0.2.7
 * https://github.com/zeindelf/vtex-utils
 *
 * Copyright (c) 2017-2018 Zeindelf
 * Released under the MIT license
 *
 * Date: 2018-01-08T20:13:47.531Z
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e.VTEX=e.VTEX||{},e.VTEX.VtexUtils=t())}(this,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),n={arrayUnique:function(e){return e.filter(function(e,t,r){return r.indexOf(e)===t})},capitalize:function(e){return e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},cleanArray:function(e){for(var t=[],r=0,n=e.length;r<n;r+=1)e[r]&&t.push(e[r]);return t},extend:function(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(this.isObject(e)&&n.length>0){if(Object.assign)return Object.assign.apply(Object,[e].concat(function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(n)));n.forEach(function(r){t.isObject(r)&&Object.keys(r).forEach(function(t){e[t]=r[t]})})}return e},implode:function(t,r){if(t instanceof Array)return t.join(r||",");if("object"===(void 0===t?"undefined":e(t))){var n=[];for(var i in t)object.hasOwnProperty(i)&&n.push(t[i]);return n.join(r||",")}return""},isObject:function(t){return"object"===(void 0===t?"undefined":e(t))&&null!==t},isObjectEmpty:function(e){for(var t in e)if({}.hasOwnProperty.call(e,t))return!1;return!0},isEmail:function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)},length:function(t){return void 0!==t.length?t.length:"object"===(void 0===t?"undefined":e(t))?Object.keys(t).length:0},objectSearch:function(e,t){var r=void 0,n=void 0,i=void 0,o=void 0;for(r in t)t.hasOwnProperty(r)&&(n=r,i=t[r]);for(r in e)if(r===n){if(e[r]===i)return e}else if(e[r]instanceof Object&&e.hasOwnProperty(r)&&(o=this.objectSearch(e[r],t)))return o;return!1},removeAccent:function(e){var t=/[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ]/g;return e.replace(t,function(e){return"_aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY"[t.source.indexOf(e)]})},shuffleArray:function(e){for(var t=0,r=[],n=[],i=e.length-1;i>0;i--)t=Math.floor(Math.random()*(i+1)),r=e[i],n[i]=e[t],n[t]=r;return n},slugifyText:function(e){e=e.replace(/^\s+|\s+$/g,"").toLowerCase().replace(/\./g,"-").replace(/\*/g,"-").replace(/\+/g,"-");for(var t="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",r=0,n=t.length;r<n;r+=1)e=e.replace(new RegExp(t.charAt(r),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(r));return"-"===(e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")).charAt(0)&&(e=e.substr(1)),"-"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e},stripHost:function(e){return e.toString().replace(/https?:\/\/.*?\//i,"/")},stripHttp:function(e){return e.replace(/^https?:/,"")},strReplace:function(e,t,r){var n=void 0;if(e instanceof Array)for(var i=0;i<e.length;i++)e[i]=e[i].replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=new RegExp(e[i],"g"),r=r.replace(n,t instanceof Array?t[i]:t);else e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=new RegExp(e,"g"),r=r.replace(n,t instanceof Array?t[0]:t);return r}},i=function(e,t,r,n,i){i="string"==typeof i?i:"R$ ";var o="\\d(?=(\\d{3})+"+((n="number"!=typeof n?2:n)>0?"\\D":"$")+")";return i+(e=(1*(e/=100)).toFixed(Math.max(0,~~n))).replace(".",r||",").replace(new RegExp(o,"g"),"$&"+(t||"."))},o=function(e,t,r,n){t=t||",",r=r||".",n="number"!=typeof n?2:n;return new RegExp("^[0-9]{1,3}(?:\\"+t+"(?:(?:[0-9]{3}(?:"+t+"|))+))?(?:\\"+r+"[0-9]{0,"+n+"})?$").test(e.toString())},u=function(e){return"string"==typeof e?e.replace(/(ids\/[0-9]+)-([0-9-]+)\//,"$1/"):e},a=function(e,t,r){return void 0===t||void 0===r||"string"!=typeof e?e:(e=e.replace(/(?:ids\/[0-9]+)-([0-9]+)-([0-9]+)\//,function(e,n,i){return e.replace("-"+n+"-"+i,"-"+t+"-"+r)})).replace(/(ids\/[0-9]+)\//,"$1-"+t+"-"+r+"/")},f=function(e){return $.ajax({url:"/no-cache/HoraAtualServidor.aspx",type:"get"}).then(function(t){var r=t.match(/([0-9]+):([0-5][0-9]):([0-5][0-9])/)[0],n=parseInt(t.match(/[a-z]{3} ([0-9]{1,2})/)[1]),i=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"].indexOf(t.match(/[a-z]{3}/)[0])+1,o=parseInt(t.match(/[0-9]{4}/)[0]);n<10&&(n="0"+n),i<10&&(i="0"+i),"function"==typeof e&&e.call(null,new Date(o+"/"+i+"/"+n+" "+r))})},c=function(e,t){return $.Deferred(function(r){return $.ajax({type:"GET",url:"/api/catalog_system/pub/category/tree/"+(e||50),dataType:"json",headers:{accept:"application/json",contentType:"application/json; charset=utf-8"}}).done(function(e){void 0!==t?r.resolve(n.objectSearch(e,{id:t})):r.resolve(e)}).fail(function(e){r.reject()})}).promise()},s=function(e){return src=e.replace?e.replace(/(?:\r\n|\r|\n)/g,"<br />"):"",e},l=function(){return $.Deferred(function(e){return $.ajax({type:"get",url:"/no-cache/profileSystem/getProfile"}).done(function(t){void 0!==t.IsUserDefined&&t.IsUserDefined?e.resolve(t):e.reject(t)}).fail(function(t){e.reject()})}).promise()},p=function(){vtexid.start({returnUrl:"/",userEmail:"",locale:"pt-BR",forceReload:!1})},v=function(){function e(){t(this,e)}return r(e,[{key:"formatPrice",value:function(e,t,r,n,o){return i(e,t,r,n,o)}},{key:"isValidPrice",value:function(e,t,r,n){return o(e,t,r,n)}},{key:"getOriginalImage",value:function(e){return u(e)}},{key:"getResizedImage",value:function(e,t,r){return a(e,t,r)}},{key:"getServerTime",value:function(e){return f(e)}},{key:"getCategories",value:function(e,t){return c(e,t)}},{key:"replaceBreakLines",value:function(e){return s(e)}},{key:"checkLogin",value:function(){return l()}},{key:"openPopupLogin",value:function(){return p()}}]),e}(),y=function(){function e(){t(this,e)}return r(e,[{key:"arrayUnique",value:function(e){return n.arrayUnique(e)}},{key:"capitalize",value:function(e){return n.capitalize(e)}},{key:"cleanArray",value:function(e){return n.cleanArray(e)}},{key:"extend",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.extend.apply(n,[e].concat(r))}},{key:"implode",value:function(e,t){return n.implode(e,t)}},{key:"isObject",value:function(e){return n.isObject(e)}},{key:"isObjectEmpty",value:function(e){return n.isObjectEmpty(e)}},{key:"isEmail",value:function(e){return n.isEmail(e)}},{key:"length",value:function(e){return n.length(e)}},{key:"objectSearch",value:function(e,t){return n.objectSearch(e,t)}},{key:"removeAccent",value:function(e){return n.removeAccent(e)}},{key:"shuffleArray",value:function(e){return n.shuffleArray(e)}},{key:"slugifyText",value:function(e){return n.slugifyText(e)}},{key:"stripHost",value:function(e){return n.stripHost(e)}},{key:"stripHttp",value:function(e){return n.stripHttp(e)}},{key:"strReplace",value:function(e,t,r){return n.strReplace(e,t,r)}}]),e}(),m=arguments;"rivets"in window&&(rivets.formatters["!"]=function(e){return!e},rivets.formatters.eq=function(e,t){return e===t},rivets.formatters.neq=function(e,t){return e!==t},rivets.formatters.gt=function(e,t){return e>t},rivets.formatters.gte=function(e,t){return e>=t},rivets.formatters.lt=function(e,t){return e<t},rivets.formatters.lte=function(e,t){return e<=t},rivets.formatters.or=function(e,t){return e||t},rivets.formatters.isEmpty=function(e){return void 0===e||null===e||"string"==typeof e&&0===e.length},rivets.formatters.isNotEmpty=function(e){return!rivets.formatters.isEmpty(e)},rivets.formatters.pass=function(e,t){return t},rivets.formatters.json=function(e,t){return JSON.stringify(e,null,t||0)},rivets.formatters.prefix=function(e,t){return""+t+e},rivets.formatters.suffix=function(e,t){return""+e+t},rivets.formatters.ucFirst=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},rivets.formatters["+"]=function(e,t){return e+t},rivets.formatters["-"]=function(e,t){return e-t},rivets.formatters["*"]=function(e,t){return e*t},rivets.formatters["/"]=function(e,t){return e/t},rivets.formatters.round=function(e,t){if(t){var r=Math.pow(10,t);e=Math.round(e*r)/r}else e=Math.round(e);return e},rivets.formatters.get=function(t,r){return t&&"object"===(void 0===t?"undefined":e(t))?t[r]:null},rivets.formatters.set=function(t,r,n){return t&&"object"===(void 0===t?"undefined":e(t))&&(t[r]=n),t},rivets.formatters["."]=rivets.formatters.get,rivets.formatters.keys=function(t){return"object"===(void 0===t?"undefined":e(t))?Object.keys(t):[]},rivets.formatters.length=function(e){return e?e.length||0:0},rivets.formatters.sort=function(){var e=Array.from(m),t=e.shift(),r=e.shift(),n=e.shift();return n||"asc"!=r&&"desc"!=r||(n=r,r=null),r?t.sort(function(e,t){return e[r]===t[r]?0:e[r]<t[r]?-1:1}):t.sort(),"desc"==n&&t.reverse(),t},rivets.formatters.default=function(e,t){return void 0!==e&&null!==e?e:t},rivets.formatters.contains=function(e,t){return!!Array.isArray(e)&&-1!==e.indexOf(t)},rivets.formatters.percent=function(e,t){return number_format(100*e,t||0,",")+"%"},rivets.formatters.bind=function(){var e=Array.from(m),t=e.shift(),r=e.shift();return"function"==typeof t?function(){t.apply(r,e)}:t},rivets.formatters.with=function(){var e=Array.from(m),t=e.shift();return"function"==typeof t?t.bind(null,e):t},rivets.formatters.slice=function(){var e=Array.from(m),t=e.shift();return Array.prototype.slice.apply(t,e)},rivets.formatters.formatPrice=function(e){return i(e)},rivets.formatters.productImgSize=function(e,t,r){return a(e,t,r)});return function e(){t(this,e),this.version="0.2.7",this.name="@VtexUtils",this.globalHelpers=new y,this.vtexHelpers=new v}});