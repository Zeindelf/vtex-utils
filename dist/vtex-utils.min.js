/*!!
 * VtexUtils.js v0.5.0
 * https://github.com/zeindelf/vtex-utils
 *
 * Copyright (c) 2017-2018 Zeindelf
 * Released under the MIT license
 *
 * Date: 2018-01-21T00:08:54.186Z
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e.VTEX=e.VTEX||{},e.VTEX.VtexUtils=r())}(this,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},t=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),n={isArray:function(e){return e instanceof Array},isBoolean:function(e){return"boolean"==typeof e},isEmail:function(e){return/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)},isFunction:function(e){return"function"==typeof e},isJson:function(e){try{var r=JSON.parse(e);return this.isObject(r)}catch(e){}return!1},isNumber:function(e){var r=Number.isNaN||window.isNaN;return"number"==typeof e&&!r(e)},isObject:function(r){return"object"===(void 0===r?"undefined":e(r))&&null!==r},isObjectEmpty:function(e){if(!this.isObject(e))return!1;for(var r in e)if({}.hasOwnProperty.call(e,r))return!1;return!0},isPlainObject:function(e){if(!this.isObject(e))return!1;try{var r=e.constructor,t=r.prototype;return r&&t&&hasOwnProperty.call(t,"isPrototypeOf")}catch(e){return!1}},isString:function(e){return"string"==typeof e},isUndefined:function(e){return void 0===e},arrayUnique:function(e){return e.filter(function(e,r,t){return t.indexOf(e)===r})},capitalize:function(e){return e.replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},cleanArray:function(e){for(var r=[],t=0,n=e.length;t<n;t+=1)e[t]&&r.push(e[t]);return r},contains:function(e,r){return e.indexOf(toString(r))>=0},escape:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\\/g,"&#x5C;").replace(/`/g,"&#96;")},extend:function(e){for(var r=this,t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.isObject(e)&&n.length>0){if(Object.assign)return Object.assign.apply(Object,[e].concat(function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}(n)));n.forEach(function(t){r.isObject(t)&&Object.keys(t).forEach(function(r){e[r]=t[r]})})}return e},getUrlParameter:function(e,r){r=this.isString(r)?r:window.location.href,e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(r);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},implode:function(e,r){if(this.isArray(e))return e.join(r||",");if(this.isObject(e)){var t=[];for(var n in e)object.hasOwnProperty(n)&&t.push(e[n]);return t.join(r||",")}return""},length:function(e){return this.isUndefined(e.length)?this.isObject(e)?Object.keys(e).length:0:e.length},objectSearch:function(e,r){var t=void 0,n=void 0,i=void 0,o=void 0;for(t in r)r.hasOwnProperty(t)&&(n=t,i=r[t]);for(t in e)if(t===n){if(e[t]===i)return e}else if(e[t]instanceof Object&&e.hasOwnProperty(t)&&(o=this.objectSearch(e[t],r)))return o;return!1},removeAccent:function(e){var r=/[àáâãäçèéêëìíîïñòóôõöùúûüýÿÀÁÂÃÄÇÈÉÊËÌÍÎÏÑÒÓÔÕÖÙÚÛÜÝ]/g;return e.replace(r,function(e){return"_aaaaaceeeeiiiinooooouuuuyyAAAAACEEEEIIIINOOOOOUUUUY"[r.source.indexOf(e)]})},shuffleArray:function(e){for(var r=0,t=[],n=[],i=e.length-1;i>0;i--)r=Math.floor(Math.random()*(i+1)),t=e[i],n[i]=e[r],n[r]=t;return n},slugifyText:function(e){e=e.replace(/^\s+|\s+$/g,"").toLowerCase().replace(/\./g,"-").replace(/\*/g,"-").replace(/\+/g,"-");for(var r="àáäâèéëêìíïîòóöôùúüûñç·/_,:;",t=0,n=r.length;t<n;t+=1)e=e.replace(new RegExp(r.charAt(t),"g"),"aaaaeeeeiiiioooouuuunc------".charAt(t));return"-"===(e=e.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-")).charAt(0)&&(e=e.substr(1)),"-"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1)),e},stripHost:function(e){return e.toString().replace(/https?:\/\/.*?\//i,"/")},stripHttp:function(e){return e.replace(/^https?:/,"")},strReplace:function(e,r,t){var n=void 0;if(this.isArray(e))for(var i=0;i<e.length;i++)e[i]=e[i].replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=new RegExp(e[i],"g"),t=t.replace(n,this.isArray(r)?r[i]:r);else e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),n=new RegExp(e,"g"),t=t.replace(n,this.isArray(r)?r[0]:r);return t},unescape:function(e){return e.replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#x2F;/g,"/").replace(/&#x5C;/g,"\\").replace(/&#96;/g,"`")},unserialize:function(e){for(var r={},t=(e=0===e.indexOf("?")?e.substr(1):e.slice(e.indexOf("?")+1)).split("&"),n=0,i=t.length;n<i;n+=1){var o=t[n].split("=");r[decodeURIComponent(o[0])]=decodeURIComponent(o[1]||"")}return r}},i={formatPrice:function(e,r,t,i,o){o=n.isString(o)?o:"R$ ";var u="\\d(?=(\\d{3})+"+((i=n.isNumber(i)?i:2)>0?"\\D":"$")+")";return o+(e=(1*(e/=100)).toFixed(Math.max(0,~~i))).replace(".",t||",").replace(new RegExp(u,"g"),"$&"+(r||"."))},getOriginalImage:function(e){return n.isString(e)?e.replace(/(ids\/[0-9]+)-([0-9-]+)\//,"$1/"):e},getResizedImage:function(e,r,t){return n.isUndefined(r)||n.isUndefined(t)||!n.isString(e)?e:(e=e.replace(/(?:ids\/[0-9]+)-([0-9]+)-([0-9]+)\//,function(e,n,i){return e.replace("-"+n+"-"+i,"-"+r+"-"+t)})).replace(/(ids\/[0-9]+)\//,"$1-"+r+"-"+t+"/")},getServerTime:function(e){return $.ajax({url:"/no-cache/HoraAtualServidor.aspx",type:"get"}).then(function(r){var t=r.match(/([0-9]+):([0-5][0-9]):([0-5][0-9])/)[0],i=parseInt(r.match(/[a-z]{3} ([0-9]{1,2})/)[1]),o=["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"].indexOf(r.match(/[a-z]{3}/)[0])+1,u=parseInt(r.match(/[0-9]{4}/)[0]);i<10&&(i="0"+i),o<10&&(o="0"+o),n.isFunction(e)&&e.call(null,new Date(u+"/"+o+"/"+i+" "+t))})},getCategories:function(e,r){return $.Deferred(function(t){return $.ajax({type:"get",url:"/api/catalog_system/pub/category/tree/"+(r||50),dataType:"json",headers:{accept:"application/json",contentType:"application/json; charset=utf-8"}}).done(function(r){globalHelper.isUndefined(e)?t.resolve(r):t.resolve(n.objectSearch(r,{id:e}))}).fail(function(e){t.reject()})}).promise()},replaceBreakLines:function(e){return e=e.replace?e.replace(/(?:\r\n|\r|\n)/g,"<br />"):""},checkLogin:function(){return $.Deferred(function(e){return $.ajax({type:"get",url:"/no-cache/profileSystem/getProfile"}).done(function(r){n.isUndefined(r.IsUserDefined)||!r.IsUserDefined?e.reject(r):e.resolve(r)}).fail(function(r){e.reject()})}).promise()},openPopupLogin:function(e){var r=(e=!!n.isBoolean(e)&&e)?window.location.href:"/";vtexid.start({returnUrl:r})}},o=function(){function e(){r(this,e)}return t(e,[{key:"formatPrice",value:function(e,r,t,n,o){return i.formatPrice(e,r,t,n,o)}},{key:"isValidPrice",value:function(e,r,t,n){return i.isValidPrice(e,r,t,n)}},{key:"getOriginalImage",value:function(e){return i.getOriginalImage(e)}},{key:"getResizedImage",value:function(e,r,t){return i.getResizedImage(e,r,t)}},{key:"getServerTime",value:function(e){return i.getServerTime(e)}},{key:"getCategories",value:function(e,r){return i.getCategories(e,r)}},{key:"replaceBreakLines",value:function(e){return i.replaceBreakLines(e)}},{key:"checkLogin",value:function(){return i.checkLogin()}},{key:"openPopupLogin",value:function(e){return i.openPopupLogin(e)}}]),e}(),u=function(){function e(){r(this,e)}return t(e,[{key:"isArray",value:function(e){return n.isArray(e)}},{key:"isBoolean",value:function(e){return n.isBoolean(e)}},{key:"isEmail",value:function(e){return n.isEmail(e)}},{key:"isFunction",value:function(e){return n.isFunction(e)}},{key:"isJson",value:function(e){return n.isJson(e)}},{key:"isNumber",value:function(e){return n.isNumber(e)}},{key:"isObject",value:function(e){return n.isObject(e)}},{key:"isObjectEmpty",value:function(e){return n.isObjectEmpty(e)}},{key:"isPlainObject",value:function(e){return n.isPlainObject(e)}},{key:"isString",value:function(e){return n.isString(e)}},{key:"isUndefined",value:function(e){return n.isUndefined(e)}},{key:"arrayUnique",value:function(e){return n.arrayUnique(e)}},{key:"capitalize",value:function(e){return n.capitalize(e)}},{key:"cleanArray",value:function(e){return n.cleanArray(e)}},{key:"escape",value:function(e){return n.escape(e)}},{key:"extend",value:function(e){for(var r=arguments.length,t=Array(r>1?r-1:0),i=1;i<r;i++)t[i-1]=arguments[i];return n.extend.apply(n,[e].concat(t))}},{key:"getUrlParameter",value:function(e,r){return n.getUrlParameter(e,r)}},{key:"implode",value:function(e,r){return n.implode(e,r)}},{key:"length",value:function(e){return n.length(e)}},{key:"objectSearch",value:function(e,r){return n.objectSearch(e,r)}},{key:"removeAccent",value:function(e){return n.removeAccent(e)}},{key:"shuffleArray",value:function(e){return n.shuffleArray(e)}},{key:"slugifyText",value:function(e){return n.slugifyText(e)}},{key:"stripHost",value:function(e){return n.stripHost(e)}},{key:"stripHttp",value:function(e){return n.stripHttp(e)}},{key:"strReplace",value:function(e,r,t){return n.strReplace(e,r,t)}},{key:"unescape",value:function(e){return n.unescape(e)}},{key:"unserialize",value:function(e){return n.unserialize(e)}}]),e}(),a=arguments;"rivets"in window&&(rivets.formatters["!"]=function(e){return!e},rivets.formatters.eq=function(e,r){return e===r},rivets.formatters.neq=function(e,r){return e!==r},rivets.formatters.gt=function(e,r){return e>r},rivets.formatters.gte=function(e,r){return e>=r},rivets.formatters.lt=function(e,r){return e<r},rivets.formatters.lte=function(e,r){return e<=r},rivets.formatters.or=function(e,r){return e||r},rivets.formatters.isEmpty=function(e){return void 0===e||null===e||"string"==typeof e&&0===e.length},rivets.formatters.isNotEmpty=function(e){return!rivets.formatters.isEmpty(e)},rivets.formatters.pass=function(e,r){return r},rivets.formatters.json=function(e,r){return JSON.stringify(e,null,r||0)},rivets.formatters.prefix=function(e,r){return""+r+e},rivets.formatters.suffix=function(e,r){return""+e+r},rivets.formatters.ucFirst=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)},rivets.formatters["+"]=function(e,r){return e+r},rivets.formatters["-"]=function(e,r){return e-r},rivets.formatters["*"]=function(e,r){return e*r},rivets.formatters["/"]=function(e,r){return e/r},rivets.formatters.round=function(e,r){if(r){var t=Math.pow(10,r);e=Math.round(e*t)/t}else e=Math.round(e);return e},rivets.formatters.get=function(r,t){return r&&"object"===(void 0===r?"undefined":e(r))?r[t]:null},rivets.formatters.set=function(r,t,n){return r&&"object"===(void 0===r?"undefined":e(r))&&(r[t]=n),r},rivets.formatters["."]=rivets.formatters.get,rivets.formatters.keys=function(r){return"object"===(void 0===r?"undefined":e(r))?Object.keys(r):[]},rivets.formatters.length=function(e){return e?e.length||0:0},rivets.formatters.sort=function(){var e=Array.from(a),r=e.shift(),t=e.shift(),n=e.shift();return n||"asc"!=t&&"desc"!=t||(n=t,t=null),t?r.sort(function(e,r){return e[t]===r[t]?0:e[t]<r[t]?-1:1}):r.sort(),"desc"==n&&r.reverse(),r},rivets.formatters.default=function(e,r){return void 0!==e&&null!==e?e:r},rivets.formatters.contains=function(e,r){return!!Array.isArray(e)&&-1!==e.indexOf(r)},rivets.formatters.percent=function(e,r){return number_format(100*e,r||0,",")+"%"},rivets.formatters.bind=function(){var e=Array.from(a),r=e.shift(),t=e.shift();return"function"==typeof r?function(){r.apply(t,e)}:r},rivets.formatters.with=function(){var e=Array.from(a),r=e.shift();return"function"==typeof r?r.bind(null,e):r},rivets.formatters.slice=function(){var e=Array.from(a),r=e.shift();return Array.prototype.slice.apply(r,e)},rivets.formatters.formatPrice=function(e){return i.formatPrice(e)},rivets.formatters.productImgSize=function(e,r,t){return i.getResizedImage(e,r,t)});return function e(){r(this,e),this.version="0.5.0",this.name="@VtexUtils",this.globalHelpers=new u,this.vtexHelpers=new o}});